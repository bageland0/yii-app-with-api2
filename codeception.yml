# suite config
suites:
    api:
        actor: ApiTester
        path: api/
        bootstrap: 'bootstrap.php'
        modules:
            enabled:
                - Asserts
                - Db:
                      dsn: mysql:host=db-test;dbname=api_db_test
                      user: api_test
                      password: apisecret
                      # tests/_data/dump.sql is generated by Makefile: make tests/_data/dump.sql
                      dump: '/app/tests/_data/dump.sql'
                      populator: 'mysql -h $host -u$user -p$password $dbname < $dump'
                      populate: true
                      cleanup: true
                      reconnect: true
                      waitlock: 10
                # Yii2 module must be loaded after Db module to make sure fixtures are not overwritten by Db dump
                - Yii2:
                    configFile: 'api/config/app-test.php'
                - REST:
                    #url: http://api-php-test:80/
                    depends: Yii2
        step_decorators:
            - \Codeception\Step\AsJson

paths:
    tests: tests
    output: tests/_output
    data: tests/_data
    support: tests/_support

settings:
    shuffle: false
    lint: true